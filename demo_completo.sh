#!/bin/bash
# Demo Completa - Akira Traders Leaderboard Integration
# Muestra todas las funcionalidades del sistema

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ  ๐ DEMO COMPLETA - AKIRA TRADERS LEADERBOARD INTEGRATION     โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# Activar entorno virtual
source venv/bin/activate

# ============================================================================
# PASO 1: EJECUTAR TESTS
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 1: Ejecutando Tests (140 tests)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
pytest tests/compliance/ tests/unit/ -v --tb=line 2>&1 | tail -10
echo ""
sleep 2

# ============================================================================
# PASO 2: COLECTAR DATOS DEL LEADERBOARD
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ก PASO 2: Colectando Datos del Leaderboard (Mock Mode)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
python scripts/leaderboard_collector.py --period WEEKLY --limit 20
echo ""
sleep 2

# ============================================================================
# PASO 3: ANALIZAR CON PERFIL MODERADO
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ฌ PASO 3: Analizando Candidatos - Perfil MODERATE"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
python scripts/leaderboard_analyzer.py --profile moderate --top 5
echo ""
sleep 2

# ============================================================================
# PASO 4: ANALIZAR CON PERFIL CONSERVADOR
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ฌ PASO 4: Analizando Candidatos - Perfil CONSERVATIVE"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
python scripts/leaderboard_analyzer.py --profile conservative --top 3
echo ""
sleep 2

# ============================================================================
# PASO 5: ANALIZAR CON PERFIL AGRESIVO
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ฌ PASO 5: Analizando Candidatos - Perfil AGGRESSIVE"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
python scripts/leaderboard_analyzer.py --profile aggressive --top 3
echo ""
sleep 2

# ============================================================================
# PASO 6: EXPORTAR ANรLISIS COMPLETO
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐พ PASO 6: Exportando Anรกlisis Completo a JSON"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
python scripts/leaderboard_analyzer.py --profile moderate --top 10 \
  --output data/leaderboard/demo_analysis.json
echo ""
sleep 1

# ============================================================================
# PASO 7: LISTAR SNAPSHOTS GUARDADOS
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 7: Listando Snapshots Guardados"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
python scripts/leaderboard_collector.py --list
echo ""
sleep 1

# ============================================================================
# PASO 8: VERIFICAR ARCHIVOS GENERADOS
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 8: Archivos Generados"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Snapshots del Leaderboard:"
ls -lh data/leaderboard/leaderboard_*.json 2>/dev/null | tail -5 | awk '{print "  " $9 " (" $5 ")"}'
echo ""
echo "Anรกlisis Exportados:"
ls -lh data/leaderboard/analysis_*.json 2>/dev/null | tail -5 | awk '{print "  " $9 " (" $5 ")"}'
echo ""
sleep 1

# ============================================================================
# PASO 9: MOSTRAR EJEMPLO DE ANรLISIS
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ PASO 9: Ejemplo de Anรกlisis JSON Exportado"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
if [ -f "data/leaderboard/demo_analysis.json" ]; then
    echo "Metadata del anรกlisis:"
    cat data/leaderboard/demo_analysis.json | python -m json.tool | head -20
    echo "  ..."
    echo ""
    echo "Primer candidato:"
    cat data/leaderboard/demo_analysis.json | python -m json.tool | grep -A 15 '"candidates":' | head -16
    echo "  ..."
else
    echo "  โ๏ธ  Archivo de anรกlisis no encontrado"
fi
echo ""
sleep 1

# ============================================================================
# RESUMEN FINAL
# ============================================================================
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ  โ DEMO COMPLETADA EXITOSAMENTE                              โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "๐ Resumen de la Demo:"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "  โ Tests ejecutados: 140/140 PASSED"
echo "  โ Datos colectados: Leaderboard WEEKLY (20 traders)"
echo "  โ Perfiles analizados: Conservative, Moderate, Aggressive"
echo "  โ Anรกlisis exportado: demo_analysis.json"
echo "  โ Sistema funcionando: 100% operativo"
echo ""
echo "๐ Archivos generados en: data/leaderboard/"
echo "๐ Documentaciรณn completa en: docs/"
echo ""
echo "๐ Prรณximos pasos sugeridos:"
echo "  1. Revisar anรกlisis: cat data/leaderboard/demo_analysis.json"
echo "  2. Probar API backend: python backend/server.py"
echo "  3. Integrar con frontend"
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ  ๐ก Para mรกs informaciรณn: README.md                           โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
